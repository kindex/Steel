<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 11 (filtered)">
<title>Steel Engine: design document</title>
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-indent:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman";}
h1
	{margin-right:0cm;
	margin-bottom:5.95pt;
	margin-left:0cm;
	text-indent:0cm;
	font-size:16.0pt;
	font-family:Arial;
	font-weight:bold;}
h2
	{margin-right:0cm;
	margin-bottom:5.95pt;
	margin-left:2.85pt;
	text-indent:0cm;
	font-size:14.0pt;
	font-family:Arial;
	font-weight:bold;
	font-style:italic;}
h3
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:5.65pt;
	text-indent:0cm;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:Arial;
	font-weight:bold;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:1.0cm;
	text-indent:0cm;
	font-size:10.0pt;
	font-family:"Times New Roman";
	text-transform:uppercase;
	font-weight:bold;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:40.25pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	font-size:10.0pt;
	font-family:"Times New Roman";
	font-variant:small-caps;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:52.45pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	font-size:10.0pt;
	font-family:"Times New Roman";
	font-style:italic;}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:48.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:60.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:72.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:84.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:96.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-top:3.0pt;
	margin-right:14.2pt;
	margin-bottom:3.0pt;
	margin-left:1.0cm;
	text-indent:1.0cm;
	font-size:12.0pt;
	font-family:"Times New Roman";}
span.codeChar
	{font-family:"Courier New";}
p.code, li.code, div.code
	{margin-top:3.0pt;
	margin-right:14.2pt;
	margin-bottom:3.0pt;
	margin-left:1.0cm;
	text-indent:1.0cm;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Courier New";}
@page Section1
	{size:595.3pt 841.9pt;
	margin:2.0cm 42.5pt 2.0cm 3.0cm;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

<meta name=CREATED content="20060330;17111829">
<meta name=CHANGED content="20060330;18132082">
</head>

<body lang=RU link=blue vlink=purple>

<div class=Section1>

<h1><a name="_Toc142999567">Дизайн Документ</a></h1>

<h2><a name="_Toc142999568">О документе</a></h2>

<p>В этом документе отображается процесс разработки <span lang=EN-US>Steel
Engine</span>, интерфейсы модулей, объяснения выбранных решений. Структура
документа совпадает со структурой движка. В квадратных скобочках пишется автор.</p>

<p>Всё что описано в этом документе в определённой степени проработано, и не
будет меняться кардинально.</p>

<p>В документе должны присутствовать:</p>

<p style='margin-left:92.7pt;text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Текущее состояние движка</p>

<p style='margin-left:92.7pt;text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Предыдущее состояние и причиной отказа</p>

<p style='margin-left:92.7pt;text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Идеи по дальнейшему улучшению (TODO)</p>

<p style='margin-left:92.7pt;text-indent:-18.0pt'><span style='font-family:
Symbol;background:lime'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:lime'>Нереализованные части</span></p>

<p style='margin-left:92.7pt;text-indent:-18.0pt'><span style='font-family:
Symbol;background:yellow'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:yellow'>Непонятные моменты и объяснения</span></p>

<p style='margin-left:92.7pt;text-indent:-18.0pt'><span style='font-family:
Symbol;background:red'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:red'>То, что присутствует, но должно быть
удалено</span></p>

<p style='margin-left:92.7pt;text-indent:-18.0pt'><span style='font-family:
Symbol;background:silver'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:silver'>Недописанные части</span></p>

<p>&nbsp;</p>

<h1><a name="_Toc142999569">Содержание</a></h1>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc142999567">Дизайн
Документ<span style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc142999568">О документе<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc142999569">Содержание<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc142999570"><span
lang=EN-US>Steel Engine</span><span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>2</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc142999571"><span lang=EN-US>Object </span>(<span
lang=EN-US>interface</span>.<span lang=EN-US>h</span>)<span style='color:windowtext;
display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc142999572"><span lang=EN-US
style='background:silver'>Engine </span><span style='background:silver'>(</span><span
lang=EN-US style='background:silver'>engine</span><span style='background:silver'>.</span><span
lang=EN-US style='background:silver'>h</span><span style='background:silver'>)</span><span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc142999573"><span lang=EN-US>Physic
Engine</span><span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></span></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999574"><span
lang=EN-US>Physic Object</span> [<span lang=EN-US>kindex</span>]<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999575"><span
lang=EN-US>Physic Engine</span> [<span lang=EN-US>kindex</span>]<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999576"><span
lang=EN-US>Particle System</span><span style='color:windowtext;display:none;
text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999577"><span
style='background:silver'>Модульность [</span><span lang=EN-US
style='background:silver'>kindex</span><span style='background:silver'>]</span><span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc142999578"><span
lang=EN-US>Resource Collection (res/res.h)</span><span style='color:windowtext;
display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc142999579"><span lang=EN-US>ResCollection</span><span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc142999580"><span lang=EN-US>rstream</span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc142999581"><span lang=EN-US>objectIdGenerator</span><span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc142999582"><span lang=EN-US>Res</span><span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999583"><span
lang=EN-US>Text</span><span style='color:windowtext;display:none;text-decoration:
none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999584"><span
lang=EN-US style='background:silver'>Config</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999585"><span
lang=EN-US style='background:silver'>Image</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999586"><span
lang=EN-US style='background:silver'>Model</span><span style='color:windowtext;
display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999587"><span
lang=EN-US>Material</span><span style='color:windowtext;display:none;
text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999588">.<span
lang=EN-US>mat format</span><span style='color:windowtext;display:none;
text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>9</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999589"><span
lang=EN-US style='background:silver'>Script</span><span style='color:windowtext;
display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>9</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc142999590">Базовые типы
данных<span style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999591"><span
lang=EN-US>uid</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999592">PositionKind<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc142999593"><span lang=EN-US>Math</span><span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999594"><span
lang=EN-US>v</span>3 (<span lang=EN-US>vector</span>3<span lang=EN-US>d</span>.<span
lang=EN-US>h</span>)<span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999595"><span
lang=EN-US>v</span>2 (<span lang=EN-US>vector</span>2<span lang=EN-US>d</span>.<span
lang=EN-US>h</span>)<span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999596">matrix33<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999597">matrix34<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>11</span></a></span></p>

<p class=MsoToc3><span class=MsoHyperlink><a href="#_Toc142999598"><span
lang=EN-US>ObjectPosition</span><span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>11</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc142999599">Глобальные
переменные<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>11</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc142999600">Переменные<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>12</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc142999601">Директивы<span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>12</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc142999602">Пространство имён<span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>12</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc142999603"><span
lang=EN-US>Logger (common/logger.h)</span><span style='color:windowtext;
display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>12</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc142999604">Структура
каталогов<span style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>13</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc142999605">Составители<span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>13</span></a></span></p>

<p>&nbsp;</p>

<p><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc142999570"><span lang=EN-US>Steel Engine</span></a></h1>

<p><b><span lang=EN-US>Steel</span></b><span lang=EN-US> <b>Engine</b> </span>является
движком для компьютерных игр и аналогичных программ. Основные преимущества
движка в его модульной структуре и расширяемости.</p>

<p><span lang=EN-US>Steel Engine </span>состоит из нескольких модулей.</p>

<p align=center style='text-align:center'><img width=465 height=309
src="design_document_files/image001.gif"></p>

<p align=center style='text-align:center'><span lang=EN-US>DFD </span>верхнего
уровня</p>

<p><b><span lang=EN-US>main</span></b> (<span lang=EN-US>core</span>) получает
управление от ОС, инициализирует все модули, в главном цикле программы
поочерёдно передаёт управление всем частям движка. К модулю <span lang=EN-US>core
</span>также относятся <a href="#_Базовые_типы_данных">базовые тиры данных</a>,
<a href="#_Logger_(common/logger.h)">логгер</a>, консоль.</p>

<p><b><span lang=EN-US>Game</span></b><span lang=EN-US> </span>не является
частью движка. Этот модуль содержит правила игры, и он индивидуален для каждого
проекта, который использует движок. <span lang=EN-US>Game </span>управляет
игровыми объектами и передаёт их движкам для обработки. В этом модуле должен
быть <span lang=EN-US>AI</span>.</p>

<p><b><span lang=EN-US><a href="#_Object_(interface.h)">Game objects</a></span></b><span
lang=EN-US> </span>– это набор игровых объектов. Они определяют, как их нужно
рисовать и куда им нужно двигаться. Часть основных объектов (модель, источник освещения,
уровень) находиться в движке, в специфичные объекты (юниты, оружие) являются
частью <span lang=EN-US>Game</span>.</p>

<p><b><span lang=EN-US><a href="#_Resource_Collection_(res/res.h)">Res</a></span></b><span
lang=EN-US> </span>– коллекция ресурсов. Модуль для хранения, загрузки и
контроля над игровыми ресурсами, такими как: <span lang=EN-US>image</span>, <span
lang=EN-US>model</span>, <span lang=EN-US>audio</span>. Вся работа с файловой
системой должна происходить через этот модуль. <span lang=EN-US>res </span>является
глобалным и используется всеми частями программы, но в большей степени игровыми
объектами.</p>

<p><b><span lang=EN-US>Graph</span></b>, <b><span lang=EN-US><a
href="#_Physic_Engine">Physic</a></span></b>, <b><span lang=EN-US>Audio</span></b><span
lang=EN-US> <b>Engines</b> </span>– это модули для обработки объектов.
Независимы друг от друга и заменяемы.</p>

<p><span lang=EN-US>Input </span>отвечает за ввод данных с клавиатуры и мышки,
и используется модулем <span lang=EN-US>Game</span>.</p>

<p><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;</span></p>

<h2><a name="_Toc142999571"></a><a name="_Object"></a><a
name="_Object_(interface.h)"></a><span lang=EN-US>GameObject
(engine/game_object.h)</span></h2>

<p>Каждый объект идентифицируется адресом в памяти, по которому он расположен.</p>

<p>[Игровой] объект – нечто, и имеющее игровую логику. Объекты управляются <span
lang=EN-US>Game</span>, используют сервисы, предоставляемые движками через
интерфейсы в самих движках. Каждый объект идентифицируется числом (<span
lang=EN-US><a href="#_uid">uid</a></span>, <span lang=EN-US>object unique
identifier</span>). Объект не может менять свой идентификатор. Идентификатор
должен быть больше нуля 0.</p>

<p>Объект имеет положение в пространстве (<span lang=EN-US>Position</span>).
Положение – это смещение, поворот и масштабирование. Положение задаётся
матрицей 3<span lang=EN-US>x</span>4.</p>

<h2><a name="_Toc142999572"><span lang=EN-US>Engine</span> (</a><span
lang=EN-US>engine</span>.<span lang=EN-US>h</span>)</h2>

<p>Движок – это заменяемая часть, которая занимается обработкой переданных ей
объектов. Объект не должен уметь себя рисовать – он только должен уметь
рассказывать движку, как он выглядит. А движок уже сам решает, как рисовать
объект, рисовать ли вообще, как накладывать тени от других объектов, используя
все современные достижения графических ускорителей.</p>

<p>Схема работы такова: вначале объект добавляется в движок (<span lang=EN-US>inject</span>).
</p>

<p>Далее существует два способа общения:</p>

<p style='margin-left:74.7pt;text-indent:-18.0pt'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>объект сам обращается к движку за сервисом. Удобен при небольших и
редких изменениях.</p>

<p style='margin-left:74.7pt;text-indent:-18.0pt'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>движок просит объект обновить информацию. Удобен при изменении
внутреннего состояния движка, например, перерисовка всей сцены.</p>

<p><a name="_Physic_Engine"></a>&nbsp;</p>

<h3><a name="_Toc142999576"><span lang=EN-US>Particle System</span></a></h3>

<h3><a name="_Toc142999577"><span style='background:silver'>Модульность [</span></a><span
lang=EN-US style='background:silver'>kindex</span><span style='background:silver'>]</span></h3>

<p><span style='background:silver'>Надо иметь возможность заменять следующие
модули для каждой системы частиц:</span></p>

<p style='margin-left:92.7pt;text-indent:-18.0pt'><span style='font-family:
Symbol;background:silver'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='background:silver'>Эмиттер (точечный, разброс,
равномерный разброс)</span></p>

<p style='margin-left:92.7pt;text-indent:-18.0pt'><span style='font-family:
Symbol;background:silver'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US style='background:silver'>Renderer</span><span
style='background:silver'> (спрайты, система спрайтов, многогранники,
меташарики)</span></p>

<p style='margin-left:92.7pt;text-indent:-18.0pt'><span style='font-family:
Symbol;background:silver'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US style='background:silver'>Physic</span></p>

<p class=MsoNormal>&nbsp;</p>

<h1><a name="_Toc142999578"></a><a name="_Resource_Collection_(res/res.h)"></a><span
lang=EN-US>Resource Collection (res/res.h)</span></h1>

<p>Существует 5 основных типов ресурсов: <b>Config</b>, <b><span lang=EN-US>Image</span></b>,
<b><span lang=EN-US>Model</span></b>, <b><span lang=EN-US>Material</span></b>, <b><span
lang=EN-US>Script</span></b>. Для хранения каждого типа ресурса существует своя
коллекция ресурсов (Соответственно resConfig, resImage и т.д.)</p>

<p>Для загрузки картинки нужно указать её относительное имя без расширения.</p>

<p><span lang=EN-US>Image *a = resImage.add(“dir/name”);</span></p>

<p>Коллекция попробует загрузить ресурс всеми определёнными способами по
порядку. Для указания своего способа загрузки существует функция <b>registerResLoader</b>.
Она принимает указатель на функция, которая создаёт ресурс по указанному имени
и директории (точки отсчёта имён). В принципе, эта функция может и не загружать
ресурс, а создавать его на лету.</p>

<p>&nbsp;</p>

<p><span lang=EN-US>resModel.registerResLoader(createClass&lt;_3DS, Model&gt;);</span></p>

<p>Функция createClass создаёт класс _3DS, вызывает его загрузчик init,
устанавливает уникальный идентификатор и возвращает созданный класс. В registerResLoader
можно передать и другой загрузчик. Например, createImage, которая загружает
изображения всех возможных комбинаций типов. Она сама ищет нужный файл по
указанному параметру name. Остальные параметры могут быть как указанными явно,
так и опущенными. </p>

<p><span lang=EN-US>name[.cube][.normal|.height][.bmp|.tga]</span></p>

<p>cube – кубическая текстура. 6 текстур в одной сверху-вниз (+X, -X, +Y, -Y,
+Z, -Z)</p>

<p>normal – карта нормалей</p>

<p>height – карты высот. Преобразовываетя к варте нормалей</p>

<p>bmp, tga – конкретные типы хранения изображений.</p>

<p>&nbsp;</p>

<p>Передаваемое имя файла в <span lang=EN-US>resImage</span>.<span lang=EN-US>add</span>(“<span
lang=EN-US>dir</span>/<span lang=EN-US>name</span>”) указываетя относительно
текущей директории в коллекции. Текущая директория меняется при рекурсивном
вызове загрузчиков. Например, <span lang=EN-US>config</span> -&gt; <span
lang=EN-US>model</span> -&gt; <span lang=EN-US>material</span> -&gt; <span
lang=EN-US>image</span>. То есть, имя файла указывается относительно директории
предыдущего загруженного ресурса. Имя может содержать директории (<span
lang=EN-US>dir</span>/<span lang=EN-US>file</span>, ../<span lang=EN-US>dir</span>/<span
lang=EN-US>file</span>). Можно указать абсолютный путь к ресурсу – для того
надо начать путь <span lang=EN-US>c</span> /. Максимальная глубина вложенности
рекурсивных вызовов – 100. Для первого вызовы текущей директорией является <span
lang=EN-US><a href="#_Структура_каталогов">res</a></span> (корень ресурсов).
Полное имя ресурса – имя относительно корня.</p>

<p>У процедуры <span lang=EN-US>add</span> есть второй параметр типа <span
lang=EN-US>bool</span>. Если он равняется <span lang=EN-US>false</span>, то
после загрузки ресурса текущая директория не восстанавливается и надо это
делать вручную с помощью вызова <span lang=EN-US>pop</span>.</p>

<p>Удаление ресурсов происходит с помощью функции <span lang=EN-US>remove</span>(<span
lang=EN-US>string FullName</span>). У каждого ресурса есть количество ссылок,
которые ссылаются на него (<span lang=EN-US>links</span>) – сколько раз его
хотели загрузить. При запросе на загрузку ресурса с уже существующим именем
ресурс не загружается, а возвращается уже загруженный из коллекции и
увеличивается количество ссылок. При вызове <span lang=EN-US>remove </span>количество
ссылок уменьшается. Если ссылок больше нет (=0), то ресурс удаляется физически
(Вызывается его деструктор).</p>

<p>Итого, ресурсы надо освобождать, иначе они до завершения программы будут в
коллекции. Внутри коллекции не могут дублироваться полные имена, но могут быть
два файла с одинаковым именем, но в разных директориях. Кроме того, в двух
разных коллекциях могут находиться два ресурса с одинаковыми полными именами.
Это достигается благодаря тому, что имена ресурсов хранятся без расширений.
Можно без проблем изменить формат хранения ресурса (другое расширение) без
изменения ссылок на него. То есть, в директории могут быть файлы <span
lang=EN-US>model</span>.3<span lang=EN-US>ds </span>и <span lang=EN-US>model</span>.<span
lang=EN-US>bmp</span>, ресурсы будут в двух коллекциях, и их имена будут <span
lang=EN-US>model</span>.</p>

<h2><a name="_Toc142999579"><span lang=EN-US>ResCollection</span></a></h2>

<p>Модуль для хранения, загрузки и контроля над игровыми ресурсами, такими как:
<span lang=EN-US>image</span>, <span lang=EN-US>model</span>, <span lang=EN-US>audio</span>.
Главный класс <span lang=EN-US>ResCollection</span> получает запросы на
загрузку ресурсов, обрабатывает их, исключает дублирование ресурсов.</p>

<p><span lang=EN-US>ResCollection </span>является шаблоном и может хранить
любых потомков класса-параметра.</p>

<p>Поля:</p>

<p>string id – строковой идентификатор коллекции (image, model)</p>

<p>vector&lt;ResStorage&gt; data – массив хранимых ресурсов и дополнительная
информация к каждому ресурсу.</p>

<p>&nbsp;</p>

<p>ResStorage:</p>

<p>object - ссылка на ресурс</p>

<p>id - уникальный идентификатор ресурса</p>

<p>links – количество ссылок на этот ресурс. При добавлении дублируемого
ресурса счётчик увеличивается на 1. При удалении -  уменьшается на 1. Если
количество ссылок становится равным 1, то ресурс удаляется из коллекции.
(аналогично Linux ext2fs).</p>

<p>name – полное имя ресурса.</p>

<p>&nbsp;</p>

<p>index – отображение полных имён ресурсов на индекс в массиве data. Для
увеличения скорости поиска по имени.</p>

<p>resIndex – отображение указателя ресурса на индекс в массиве data. Для
увеличения скорости удаления ресурса по ссылке на него.</p>

<p>&nbsp;</p>

<p>Interface:</p>

<p><span lang=EN-US>operator</span>[], <span lang=EN-US>get</span>  - Вернуть
ресурс по полному имени</p>

<p><span lang=EN-US>add</span> - Добавить ресурс по имени и типу, если ресурса
еще нет в коллекции</p>

<p>remove - удалить ресурс</p>

<p>pop – описание выше</p>

<p>&nbsp;</p>

<h2><a name="_Toc142999580"><span lang=EN-US>rstream</span></a></h2>

<p>Вся работа с файловой системой должна происходить через этот класс. Он
отвечает за чтение файла из файловой системы или архивов. Интерфейс класса
совместим с <span lang=EN-US>fstream</span>.</p>

<h2><a name="_Toc142999581"><span lang=EN-US>objectIdGenerator</span></a></h2>

<p>Этот класс отвечает за генерирование уникальных идентификаторов для всех
объектов (сродни <span lang=EN-US>sequence </span>в <span lang=EN-US>PostgreSQL</span>).</p>

<h2><a name="_Toc142999582"><span lang=EN-US>Res</span></a></h2>

<p>Класс - храниель и рагрузчик одного ресурса. Хранение - стандартизовано для
каждого типа ресурса. Загруска - для каждого типа может быть несколько классов
для загрузки. От этого класса наследуются классы для хранения ресурсов для
каждого типа (image, model). В них реализуется деструктор, который уничтожает
структуры, созданные при загрузке. От них наследуются загрузчики, которые
переопределяют метод init. init загружает ресурс или генерирует по строковому
идентификатору.</p>

<h3><a name="_Toc142999583"><span lang=EN-US>Text</span></a></h3>

<p>Это самый простой тип ресурса.</p>

<p>Предназначен для хранения текста. Загружает текст из текстового файла.
Внутренне представление – <span lang=EN-US>unsigned char </span>*.(<span
lang=EN-US>ASCII</span>)</p>

<p class=code><span lang=EN-US>unsigned</span><span lang=EN-US> </span><span
lang=EN-US>char</span> *<span lang=EN-US>getText</span>(<span lang=EN-US>void</span>)
<span lang=EN-US>const</span> – сам текст в виде <span lang=EN-US>z</span>-<span
lang=EN-US>terminated</span><span lang=EN-US> </span><span lang=EN-US>string</span>
(в конце /0)</p>

<p class=code><span lang=EN-US>int getLength(void) const – </span>длина текста без<span
lang=EN-US> /0</span></p>

<p><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc142999584"><span lang=EN-US>Config</span></a></h3>

<p>Смотрите<span lang=EN-US> file_formats/scene</span></p>

<h3><a name="_Toc142999585"><span lang=EN-US style='background:silver'>Image</span></a></h3>

<h3><a name="_Toc142999586"><span lang=EN-US style='background:silver'>Model</span></a></h3>

<p class=code><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc142999590"></a><a name="_Базовые_типы_данных"></a>Базовые типы
данных</h1>

<h3><a name="_Toc142999591"></a><a name="_uid"></a><span lang=EN-US>uid</span></h3>

<p><b><span lang=EN-US>uid</span></b> (<span lang=EN-US>unique identifier</span>)
– идентификатор объекта или ресурса, положительное целое число (<span
lang=EN-US>unsigned int</span>). У двух разных объектов должны быть различные
идентификаторы.</p>

<p>За генерацию уникальных идентификаторов отвечает класс <b>IdGenerator</b> (<span
lang=EN-US>interface</span>.<span lang=EN-US>h</span>). Для каждого типа
объектов существует свой идентификатор. Для <a href="#_Object">игровых объектов</a> 
- <b>objectIdGenerator</b>.</p>

<h3><a name="_Toc142999592"></a><a name="_PositionKind"></a>PositionKind</h3>

<p class=code><span lang=EN-US>enum</span>{ <span lang=EN-US>local</span>, <span
lang=EN-US>global</span> }</p>

<p>Тип положения объекта: <span lang=EN-US>local </span>– относительно
родителя, <span lang=EN-US>global </span>– в глобальной системе координат.</p>

<p class=code>&nbsp;</p>

<h2><a name="_Toc142999593"></a><a name="_ObjectPosition"></a><span lang=EN-US>Math</span></h2>

<p>Основные геометрические типы данных хранятся в директории <span lang=EN-US>math</span>.
</p>

<h3><a name="_Toc142999594"></a><a name="_v3_(vector3d.h)"></a><span
lang=EN-US>v</span>3 (<span lang=EN-US>vector</span>3<span lang=EN-US>d</span>.<span
lang=EN-US>h</span>)</h3>

<p>Используется для хранения трёхмерного вектора, положения точки в
пространстве, направляющих прямых, нормалей к плоскостям и т.д.</p>

<p>Содержит 3 поля: float x, y, z;</p>

<p>Конструкторы: </p>

<p>v3() – не инициализирует ничего (для повышения производительности)</p>

<p><span lang=EN-US>v3(float x, float y, float z)</span></p>

<p><span lang=EN-US>&nbsp;</span></p>

<p>Чтение и запись полей осуществляется по их именам. Кроме того доступен operator[](int
i) для доступа к полям: 0 - x, 1 - y, 2 – z</p>

<p>Инициализация: loadZero(), loadOne()</p>

<p>И множество полезных операторов: векторное и скалярное произведение, + - * /
</p>

<p>operator== и operator!= сравнивают вектора по компонентам.</p>

<p>Полезные функции<span lang=EN-US>: </span><span lang=EN-US>getLength,
normalize, getNormalized, getSquaredLength</span></p>

<p><span lang=EN-US> </span></p>

<p>Кроме того доступена упрощенная версия v3 без конструктора. v3simple. Можно
использовать только тогда, когда нельзя использовать v3 (например, в union).</p>

<h3><a name="_Toc142999595"><span lang=EN-US>v</span>2 (</a><span lang=EN-US>vector</span>2<span
lang=EN-US>d</span>.<span lang=EN-US>h</span>)</h3>

<p>Полностью аналогичен классу <span lang=EN-US><a href="#_v3_(vector3d.h)">v<span
lang=RU>3</span></a></span>. Реже используется и поэтому может не содержать все
функции, которые есть в <span lang=EN-US>v</span>3. При необходимости можно
добавить их.</p>

<h3><a name="_Toc142999596"></a><a name="_matrix33"></a>matrix33</h3>

<p>Квадратная матрица 3x3. Используется как матрица преобразования координат.</p>

<p>Содержит 3 строчки по 3 числа в каждой. Доступ к полям осуществляется по
имени. 9 чисел доступны двумя способами: как одномерный массив из 9ти элементов
и как двумерный массив 3x3 (первый индекс – номер строки).</p>

<p>Нет конструктора, так как этот класс используется в union.</p>

<p>Инициализаторы: loadIdentity (единичная матрица), loadZero (нулевая
матрица).</p>

<p>Пергруженные операторы: + - * /</p>

<p>matrix33 operator*(matrix33 operand) перемножает 2 матрицы. Из первой
берутся строки, из второй столбцы.</p>

<p>setRotation[X, Y, Z, Axis] делают матрицу матрицей поворота вдоль указанной
оси на указанный угол в радианах. </p>

<p>setScale – делает матрицу масштабирования</p>

<p>getInverse – возвращает обратную матрицу</p>

<p>&nbsp;</p>

<p>Примеры использования: изменения системы координат</p>

<p class=code><span lang=EN-US>matrix</span>33 <span lang=EN-US>a</span>,<span
lang=EN-US>b</span>,<span lang=EN-US>c</span>;</p>

<p class=code><span lang=EN-US>a.setRotationX(1);</span></p>

<p class=code><span lang=EN-US>b = a.getInverse();</span></p>

<p class=code><span lang=EN-US>c</span> = <span lang=EN-US>a</span>*<span
lang=EN-US>b</span>; <span style='color:green'>// должна получиться единичная
матрица</span></p>

<p class=code><span lang=EN-US>v</span>3(1,2,3)*<span lang=EN-US>a</span>; <span
style='color:green'>// вектор (1,2,3) повернутый на 1 радиан в положительном
направлении вдоль оси </span><span lang=EN-US style='color:green'>X</span></p>

<p class=code><span lang=EN-US>b.setRotationY(2);</span></p>

<p class=code><span lang=EN-US>c = a*b;</span></p>

<p class=code><span lang=EN-US>v</span>3(1,2,3)*<span lang=EN-US>c</span>; <span
style='color:green'>// вектор (1,2,3) повернутый на 1 радиан в положительном
направлении вдоль оси </span><span lang=EN-US style='color:green'>X</span><span
style='color:green'>, и после этого еще на 2 радиана вдоль оси </span><span
lang=EN-US style='color:green'>Y</span></p>

<h3><a name="_Toc142999597"></a><a name="_matrix34"></a>matrix34</h3>

<p>Матрица из трёх строк и четырёх столбцов. Служит эмуляцией матрицы 4x4, к
которой нижняя строка равна (0,0,0,1). Интерфейс аналогичен <a href="#_matrix33">matrix33</a>.
<b>matrix34</b> состоит из matrix33 (первые 3 колонки) и v3 (четвертая колонка)</p>

<p><span lang=EN-US>setTranslation </span>и<span lang=EN-US> getTranslation </span>работают
с вектором<span lang=EN-US>. </span>Эти функции делают матрицу переноса.</p>

<p>&nbsp;</p>

<p>Примеры использования: изменения системы координат</p>

<p class=code><span lang=EN-US>matrix</span>34 <span lang=EN-US>a</span>,<span
lang=EN-US>b</span>, <span lang=EN-US>c</span>;</p>

<p class=code><span lang=EN-US>a.setRotationZ(M_PI/2);</span></p>

<p class=code><span lang=EN-US>a.setTranslation(v3(1,0,0));</span></p>

<p class=code><span lang=EN-US>&nbsp;</span></p>

<p class=code><span lang=EN-US>c</span> *= <span lang=EN-US>a</span>*<span
lang=EN-US>a</span>;</p>

<p class=code>&nbsp;</p>

<p class=code><span lang=EN-US>v</span>3 <span lang=EN-US>result</span> = <span
lang=EN-US>c</span>*<span lang=EN-US>v</span>3(0,0,0); <span style='color:green'>//
должно получиться (1,1,0)</span></p>

<h3><a name="_Toc142999598"><span lang=EN-US>ObjectPosition</span></a></h3>

<p>Синоним <span lang=EN-US><a href="#_matrix34">matrix<span lang=RU>34</span></a></span></p>

<p>&nbsp;</p>

<h1><a name="_Toc142999599">Глобальные переменные</a></h1>

<h2><a name="_Toc142999600">Переменные</a></h2>

<p><b><span lang=EN-US style='background:silver'>res</span></b><span
style='background:silver'>, </span><b><span lang=EN-US style='background:silver'>objectIdGenerator</span></b>,
<b><span lang=EN-US>globalTimer</span></b></p>

<h2><a name="_Toc142999601">Директивы</a></h2>

<p><b><span lang=EN-US>STEEL</span>_</b><b><span lang=EN-US>OS</span></b><span
lang=EN-US> </span>– отвечает за компиляцию для под определённую ОС<span
lang=EN-US> (<b>OS_WIN32</b>=1, <b>OS_LINUX</b>=2)</span></p>

<p><b><span lang=EN-US>STEEL_COMPILER</span></b><span lang=EN-US> – </span>содержит
идентификатор компилятора<span lang=EN-US> (<b>COMPILER _VS8</b>=1, <b>COMPILER
_GCC</b>=2)</span></p>

<p>Эти директивы выставляются в проектных файлах как параметры компилятора (-<span
lang=EN-US>D</span>), а не определяются внутри кода.</p>

<p><b><span lang=EN-US>STEEL</span>_</b><b><span lang=EN-US>COMPILER</span>_</b><b><span
lang=EN-US>VERSION</span></b><span lang=EN-US> </span>– версия компилятора,
умноженная на 10. Например, вместо 8.0 будет 80, а вместо 3.4.2 будет 34.</p>

<p><b><span lang=EN-US>STEEL</span>_</b><b><span lang=EN-US>VECTOR</span></b><span
lang=EN-US> </span>- определена, когда <span lang=EN-US>svector </span>использует
реализацию <span lang=EN-US>steel</span>::<span lang=EN-US>vector </span>(<span
lang=EN-US>common</span>/<span lang=EN-US>steel</span>_<span lang=EN-US>vector</span>.<span
lang=EN-US>h</span>), иначе использует <span lang=EN-US>std</span>::<span
lang=EN-US>vector</span></p>

<p><b><span lang=EN-US>LIB</span>_</b><b><span lang=EN-US>SDL</span></b> –
определена, когда проект компилируется с поддержкой <span lang=EN-US>SDL</span></p>

<p><b>LIB_STEEL</b> – определена при компиляции проекта в статическую
библиотеку.</p>

<p><b><span lang=EN-US>LIB</span>_</b><b><span lang=EN-US>OPENAL</span></b><span
lang=EN-US> </span>– определена, если проект использует <span lang=EN-US>OpenAL</span>.</p>

<p>&nbsp;</p>

<h2><a name="_Toc142999602">Пространство</a> имён</h2>

<p><span lang=EN-US style='background:silver'>std, steel</span></p>

<h1><a name="_Toc142999603"></a><a name="_Logger_(common/logger.h)"></a><span
lang=EN-US>Logger (common/logger.h)</span></h1>

<p>Стандартный способ сообщения информации пользователю – через <span
lang=EN-US>class <b>Logger</b></span>. Существует глобальный экземпляр класса <b><span
lang=EN-US>steel</span>::</b><b><span lang=EN-US>log</span></b>, через который
следует выводить все сообщения. Лоррег использует глобальный таймер, который
отсчитывает время от момента запуска программы. </p>

<p>Все сообщения выводятся в файл <span lang=EN-US>steel</span>.<span
lang=EN-US>log</span></p>

<p style='margin-left:74.7pt;text-indent:0cm'><span class=codeChar><b><span
lang=EN-US>log_msg</span></b><span lang=EN-US>(string keywords, string message)</span></span></p>

<p>Добавление сообщения в файл, перед текстом ставится время от начала открытия
лог-файла. <span lang=EN-US>Str </span>– текст сообщения. <span lang=EN-US>keywords
</span>– ключевые слова для быстрого поиска и отсеивания нужных записей в логе.
Ключевые слова отделяются пробелом. Обычно ключевое слово это имя модуля или
функции, откуда пришло сообщение.</p>

<p>Дополнительно к главному лог-файлу создаются лог файлы в директории <span
lang=EN-US>log </span>для каждого ключевого слова. В начале работы программы
все дополнительные лог фалы стираются.</p>

<p><b>LogFilter</b> отвечает за отсеивание лишних сообщений в главном
лог-файле. Фильтр – это набор ключевых слов, отледённый пробелами. Правила
фильтра проверябтся посдедовательно. Если с сообщении есть ключевое слово из
фильтра, то оно выводиться, если же фильтр начинается с -, то отбрасывается.
Например, если фильтр “error -info”, то будут выводиться все сообщения с error,
а если error нет, то будут отбрасываться все сообщения с info.</p>

<p>&nbsp;</p>

<p>Кроме этого определены макросы:</p>

<p><span class=codeChar><b><span lang=EN-US>assert</span></b></span><span
class=codeChar>(<span lang=EN-US>expression</span></span><span class=codeChar>,
<span lang=EN-US>message</span></span><span class=codeChar>)</span> – проверка
истинности выражения expression во время выполнения программы. Если expression
не выполняется, то выводится сообщение в файл и вызывается throw.</p>

<p><span class=codeChar><b><span lang=EN-US>cassert</span></b></span><span
class=codeChar>(<span lang=EN-US>expression</span></span><span class=codeChar>)</span>
– проверка условия во время компиляции. Если условие не выполняется, то
компиляция прерывается с ошибкой «cannot allocate an array of constant size 0»</p>

<p><span class=codeChar><b><span lang=EN-US>debug</span></b></span><span
class=codeChar>(<span lang=EN-US>message</span></span><span class=codeChar>)</span>
– именно этим макросом надо выводить все временные отладочные сообщения в лог
файл.</p>

<p><span class=codeChar><b><span lang=EN-US>log</span></b></span><span
class=codeChar><b>_<span lang=EN-US>msg</span></b></span><span class=codeChar>(<span
lang=EN-US>keywords</span></span><span class=codeChar>, <span lang=EN-US>message</span></span><span
class=codeChar>)</span> – именно этим макросом надо выводить сообщения в
лог-файл</p>

<p><span class=codeChar><b><span lang=EN-US>abort</span></b></span><span
class=codeChar><b>_<span lang=EN-US>init</span></b></span><span class=codeChar>(<span
lang=EN-US>keywords</span></span><span class=codeChar>, <span lang=EN-US>message</span></span><span
class=codeChar>)</span> – неудачный выход из процедуры с сообщением в лог</p>

<p>&nbsp;</p>

<h1><a name="_Toc142999604"></a><a name="_Структура_каталогов"></a>Структура
каталогов</h1>

<p><a href="#_Resource_Collection_(res/res.h)">ссылки</a></p>

<h1><a name="_Toc142999605">Составители</a></h1>

<p><span lang=EN-US>KindeX</span></p>

</div>

</body>

</html>
